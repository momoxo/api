<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="robots" content="index, follow, all" />
        <title>XoopsMediaUploader | Momoxo API</title>
                    <link rel="stylesheet" type="text/css" href="stylesheet.css">
                            </head>
        <body id="class">
            <div class="header">
        <ul>
            <li><a href="classes.html">Classes</a></li>
                            <li><a href="namespaces.html">Namespaces</a></li>
                        <li><a href="interfaces.html">Interfaces</a></li>
            <li><a href="doc-index.html">Index</a></li>
            
        </ul>

        <div id="title">Momoxo API</div>

            <div class="type">Class</div>
    <h1><a href=".html"></a>XoopsMediaUploader</h1>
    </div>
        <div class="content">
                <p>class    <strong>XoopsMediaUploader</strong></p>

            <div class="description">
            <p>Upload Media files</p>
            <p>Example of usage:<br />
 &lt;code&gt;<br />
 include_once &#039;uploader.php&#039;;<br />
 $allowed_mimetypes = array(&#039;image/gif&#039;, &#039;image/jpeg&#039;, &#039;image/pjpeg&#039;, &#039;image/x-png&#039;);<br />
 $maxfilesize = 50000;<br />
 $maxfilewidth = 120;<br />
 $maxfileheight = 120;<br />
 $uploader = new XoopsMediaUploader(&#039;/home/xoops/uploads&#039;, $allowed_mimetypes, $maxfilesize, $maxfilewidth, $maxfileheight);<br />
 if ($uploader-&gt;fetchMedia($_POST[&#039;uploade_file_name&#039;])) {<br />
   if (!$uploader-&gt;upload()) {<br />
      echo $uploader-&gt;getErrors();<br />
   } else {<br />
      echo &#039;&lt;h4&gt;File uploaded successfully!&lt;/h4&gt;&#039;<br />
      echo &#039;Saved as: &#039; . $uploader-&gt;getSavedFileName() . &#039;&lt;br /&gt;&#039;;<br />
      echo &#039;Full path: &#039; . $uploader-&gt;getSavedDestination();<br />
   }<br />
 } else {<br />
   echo $uploader-&gt;getErrors();<br />
 }<br />
 &lt;/code&gt;</p>
        </div>
    
    
            <h2>Properties</h2>

            <table>
                    <tr>
                <td class="type" id="property_allowUnknownTypes">
                                                            
                </td>
                <td>$allowUnknownTypes</td>
                <td class="last">Flag indicating if unrecognized mimetypes should be allowed (use with precaution ! may lead to security issues )</td>
            </tr>
                    <tr>
                <td class="type" id="property_mediaName">
                                                            
                </td>
                <td>$mediaName</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_mediaType">
                                                            
                </td>
                <td>$mediaType</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_mediaSize">
                                                            
                </td>
                <td>$mediaSize</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_mediaTmpName">
                                                            
                </td>
                <td>$mediaTmpName</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_mediaError">
                                                            
                </td>
                <td>$mediaError</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_mediaRealType">
                                                            
                </td>
                <td>$mediaRealType</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_uploadDir">
                                                            
                </td>
                <td>$uploadDir</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_allowedMimeTypes">
                                                            
                </td>
                <td>$allowedMimeTypes</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_allowedExtensions">
                                                            
                </td>
                <td>$allowedExtensions</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_maxFileSize">
                                                            
                </td>
                <td>$maxFileSize</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_maxWidth">
                                                            
                </td>
                <td>$maxWidth</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_maxHeight">
                                                            
                </td>
                <td>$maxHeight</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_targetFileName">
                                                            
                </td>
                <td>$targetFileName</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_prefix">
                                                            
                </td>
                <td>$prefix</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_errors">
                                                            
                </td>
                <td>$errors</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_savedDestination">
                                                            
                </td>
                <td>$savedDestination</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_savedFileName">
                                                            
                </td>
                <td>$savedFileName</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property_extensionToMime">
                                                            
                </td>
                <td>$extensionToMime</td>
                <td class="last"></td>
            </tr>
                    <tr>
                <td class="type" id="property__strictCheckExtensions">
                                                            
                </td>
                <td>$_strictCheckExtensions</td>
                <td class="last"></td>
            </tr>
            </table>

    
            <h2>Methods</h2>

            <table>
                    <tr>
                <td class="type">
                    
                </td>
                <td class="last">
                    <a href="#method_XoopsMediaUploader">XoopsMediaUploader</a>($uploadDir, $allowedMimeTypes, $maxFileSize, $maxWidth = null, $maxHeight = null)
                    <p>Constructor</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    
                </td>
                <td class="last">
                    <a href="#method_setAllowedExtensions">setAllowedExtensions</a>($extensions)
                    <p></p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    
                </td>
                <td class="last">
                    <a href="#method_setStrictCheckExtensions">setStrictCheckExtensions</a>($extensions)
                    <p></p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    bool
                </td>
                <td class="last">
                    <a href="#method_fetchMedia">fetchMedia</a>(string $media_name, int $index = null)
                    <p>Fetch the uploaded file</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    
                </td>
                <td class="last">
                    <a href="#method_setTargetFileName">setTargetFileName</a>(string $value)
                    <p>Set the target filename</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    
                </td>
                <td class="last">
                    <a href="#method_setPrefix">setPrefix</a>(string $value)
                    <p>Set the prefix</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    string
                </td>
                <td class="last">
                    <a href="#method_getMediaName">getMediaName</a>()
                    <p>Get the uploaded filename</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    string
                </td>
                <td class="last">
                    <a href="#method_getMediaType">getMediaType</a>()
                    <p>Get the type of the uploaded file</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    int
                </td>
                <td class="last">
                    <a href="#method_getMediaSize">getMediaSize</a>()
                    <p>Get the size of the uploaded file</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    string
                </td>
                <td class="last">
                    <a href="#method_getMediaTmpName">getMediaTmpName</a>()
                    <p>Get the temporary name that the uploaded file was stored under</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    string
                </td>
                <td class="last">
                    <a href="#method_getSavedFileName">getSavedFileName</a>()
                    <p>Get the saved filename</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    string
                </td>
                <td class="last">
                    <a href="#method_getSavedDestination">getSavedDestination</a>()
                    <p>Get the destination the file is saved to</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    bool
                </td>
                <td class="last">
                    <a href="#method_upload">upload</a>($chmod = 420)
                    <p>Check the file and copy it to the destination</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    bool
                </td>
                <td class="last">
                    <a href="#method__copyFile">_copyFile</a>($chmod)
                    <p>Copy the file to its destination</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    bool
                </td>
                <td class="last">
                    <a href="#method_checkMaxFileSize">checkMaxFileSize</a>()
                    <p>Is the file the right size?</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    bool
                </td>
                <td class="last">
                    <a href="#method_checkMaxWidth">checkMaxWidth</a>()
                    <p>Is the picture the right width?</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    bool
                </td>
                <td class="last">
                    <a href="#method_checkMaxHeight">checkMaxHeight</a>()
                    <p>Is the picture the right height?</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    bool
                </td>
                <td class="last">
                    <a href="#method_checkMimeType">checkMimeType</a>()
                    <p>Check whether or not the uploaded file type is allowed</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    
                </td>
                <td class="last">
                    <a href="#method__checkStrict">_checkStrict</a>()
                    <p></p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    bool
                </td>
                <td class="last">
                    <a href="#method_checkExpectedMimeType">checkExpectedMimeType</a>()
                    <p>Check whether or not the uploaded file type is allowed</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    
                </td>
                <td class="last">
                    <a href="#method_setErrors">setErrors</a>(string $error)
                    <p>Add an error</p>
                </td>
                <td></td>
            </tr>
                    <tr>
                <td class="type">
                    array|string
                </td>
                <td class="last">
                    <a href="#method_getErrors">getErrors</a>(bool $ashtml = true)
                    <p>Get generated errors</p>
                </td>
                <td></td>
            </tr>
            </table>


        <h2>Details</h2>

                        <h3 id="method_XoopsMediaUploader">
        <div class="location">at line 70</div>
        <code>            public            
    <strong>XoopsMediaUploader</strong>($uploadDir, $allowedMimeTypes, $maxFileSize, $maxWidth = null, $maxHeight = null)</code>
    </h3>
    <div class="details">
        <p>Constructor</p>
        <p></p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td></td>
                <td>$uploadDir</td>
                <td></td>
            </tr>
                    <tr>
                <td></td>
                <td>$allowedMimeTypes</td>
                <td></td>
            </tr>
                    <tr>
                <td></td>
                <td>$maxFileSize</td>
                <td></td>
            </tr>
                    <tr>
                <td></td>
                <td>$maxWidth</td>
                <td></td>
            </tr>
                    <tr>
                <td></td>
                <td>$maxHeight</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

                <h3 id="method_setAllowedExtensions">
        <div class="location">at line 96</div>
        <code>            public            
    <strong>setAllowedExtensions</strong>($extensions)</code>
    </h3>
    <div class="details">
        <p></p>
        <p></p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td></td>
                <td>$extensions</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

                <h3 id="method_setStrictCheckExtensions">
        <div class="location">at line 101</div>
        <code>            public            
    <strong>setStrictCheckExtensions</strong>($extensions)</code>
    </h3>
    <div class="details">
        <p></p>
        <p></p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td></td>
                <td>$extensions</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

                <h3 id="method_fetchMedia">
        <div class="location">at line 113</div>
        <code>            public            bool
    <strong>fetchMedia</strong>(string $media_name, int $index = null)</code>
    </h3>
    <div class="details">
        <p>Fetch the uploaded file</p>
        <p></p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td>string</td>
                <td>$media_name</td>
                <td>Name of the file field</td>
            </tr>
                    <tr>
                <td>int</td>
                <td>$index</td>
                <td>Index of the file (if more than one uploaded under that name)</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>bool</td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_setTargetFileName">
        <div class="location">at line 173</div>
        <code>            public            
    <strong>setTargetFileName</strong>(string $value)</code>
    </h3>
    <div class="details">
        <p>Set the target filename</p>
        <p></p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td>string</td>
                <td>$value</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

                <h3 id="method_setPrefix">
        <div class="location">at line 182</div>
        <code>            public            
    <strong>setPrefix</strong>(string $value)</code>
    </h3>
    <div class="details">
        <p>Set the prefix</p>
        <p></p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td>string</td>
                <td>$value</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

                <h3 id="method_getMediaName">
        <div class="location">at line 191</div>
        <code>            public            string
    <strong>getMediaName</strong>()</code>
    </h3>
    <div class="details">
        <p>Get the uploaded filename</p>
        <p></p>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_getMediaType">
        <div class="location">at line 201</div>
        <code>            public            string
    <strong>getMediaType</strong>()</code>
    </h3>
    <div class="details">
        <p>Get the type of the uploaded file</p>
        <p></p>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_getMediaSize">
        <div class="location">at line 211</div>
        <code>            public            int
    <strong>getMediaSize</strong>()</code>
    </h3>
    <div class="details">
        <p>Get the size of the uploaded file</p>
        <p></p>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>int</td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_getMediaTmpName">
        <div class="location">at line 221</div>
        <code>            public            string
    <strong>getMediaTmpName</strong>()</code>
    </h3>
    <div class="details">
        <p>Get the temporary name that the uploaded file was stored under</p>
        <p></p>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_getSavedFileName">
        <div class="location">at line 231</div>
        <code>            public            string
    <strong>getSavedFileName</strong>()</code>
    </h3>
    <div class="details">
        <p>Get the saved filename</p>
        <p></p>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_getSavedDestination">
        <div class="location">at line 240</div>
        <code>            public            string
    <strong>getSavedDestination</strong>()</code>
    </h3>
    <div class="details">
        <p>Get the destination the file is saved to</p>
        <p></p>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>string</td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_upload">
        <div class="location">at line 249</div>
        <code>            public            bool
    <strong>upload</strong>($chmod = 420)</code>
    </h3>
    <div class="details">
        <p>Check the file and copy it to the destination</p>
        <p></p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td></td>
                <td>$chmod</td>
                <td></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>bool</td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method__copyFile">
        <div class="location">at line 288</div>
        <code>            public            bool
    <strong>_copyFile</strong>($chmod)</code>
    </h3>
    <div class="details">
        <p>Copy the file to its destination</p>
        <p></p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td></td>
                <td>$chmod</td>
                <td></td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>bool</td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_checkMaxFileSize">
        <div class="location">at line 310</div>
        <code>            public            bool
    <strong>checkMaxFileSize</strong>()</code>
    </h3>
    <div class="details">
        <p>Is the file the right size?</p>
        <p></p>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>bool</td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_checkMaxWidth">
        <div class="location">at line 323</div>
        <code>            public            bool
    <strong>checkMaxWidth</strong>()</code>
    </h3>
    <div class="details">
        <p>Is the picture the right width?</p>
        <p></p>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>bool</td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_checkMaxHeight">
        <div class="location">at line 343</div>
        <code>            public            bool
    <strong>checkMaxHeight</strong>()</code>
    </h3>
    <div class="details">
        <p>Is the picture the right height?</p>
        <p></p>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>bool</td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_checkMimeType">
        <div class="location">at line 363</div>
        <code>            public            bool
    <strong>checkMimeType</strong>()</code>
    </h3>
    <div class="details">
        <p>Check whether or not the uploaded file type is allowed</p>
        <p></p>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>bool</td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method__checkStrict">
        <div class="location">at line 399</div>
        <code>            public            
    <strong>_checkStrict</strong>()</code>
    </h3>
    <div class="details">
        <p></p>
        <p></p>
        <div class="tags">
            
            
            
                    </div>
    </div>

                <h3 id="method_checkExpectedMimeType">
        <div class="location">at line 414</div>
        <code>            public            bool
    <strong>checkExpectedMimeType</strong>()</code>
    </h3>
    <div class="details">
        <p>Check whether or not the uploaded file type is allowed</p>
        <p></p>
        <div class="tags">
            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>bool</td>
            <td></td>
        </tr>
    </table>

            
            
                    </div>
    </div>

                <h3 id="method_setErrors">
        <div class="location">at line 428</div>
        <code>            public            
    <strong>setErrors</strong>(string $error)</code>
    </h3>
    <div class="details">
        <p>Add an error</p>
        <p></p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td>string</td>
                <td>$error</td>
                <td></td>
            </tr>
            </table>

            
            
            
                    </div>
    </div>

                <h3 id="method_getErrors">
        <div class="location">at line 440</div>
        <code>            public            array|string
    <strong>getErrors</strong>(bool $ashtml = true)</code>
    </h3>
    <div class="details">
        <p>Get generated errors</p>
        <p></p>
        <div class="tags">
                            <h4>Parameters</h4>

                    <table>
                    <tr>
                <td>bool</td>
                <td>$ashtml</td>
                <td>Format using HTML?</td>
            </tr>
            </table>

            
                            <h4>Return Value</h4>

                    <table>
        <tr>
            <td>array|string</td>
            <td>Array of array messages OR HTML string</td>
        </tr>
    </table>

            
            
                    </div>
    </div>

    
            </div>
            <div id="footer">
        Generated by <a href="http://sami.sensiolabs.org/" target="_top">Sami, the API Documentation Generator</a>.
    </div>
    </body>
</html>
